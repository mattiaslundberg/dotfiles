#!/bin/sh

if [ -x $(command -v brew) ]; then
    brew upgrade
    brew upgrade --cask

    brew uninstall emacs-plus@28
    brew install emacs-plus@28 --with-elrumo2-icon --with-native-comp
fi

rustup update
tldr --update
(cd ~/.hammerspoon && git pull)

~/.tmux/plugins/tpm/bin/update_plugins all

(cd ~/.pyenv && git pull)
(cd ~/.pyenv/plugins/pyenv-virtualenv && git pull)

if [ -f /usr/bin/apt-get ]; then
	sudo apt update && sudo apt upgrade -y
fi
if [ -f /usr/bin/snap ]; then
	sudo snap refresh
fi

(cd ~/.elixir-ls && git pull origin master && mix deps.get && mix elixir_ls.release -o ./bin)

(cd ~/.kotlin-language-server && git pull origin main && ./gradlew :server:installDist)

asdf plugin-update --all

if [ -x $(command -v gcloud) ]; then
    gcloud components update
fi

~/.emacs.d/bin/doom --yes upgrade
